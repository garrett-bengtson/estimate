<html t:type="layout" xmlns:t="http://tapestry.apache.org/schema/tapestry_5_4.xsd" title="Reports | EstiMate">
   <link rel="stylesheet" type="text/css" href="css/report.css">
   </link>
   <t:security.authenticated>
      <div class="container my-3">
         <div class="row align-items-center">
            <div class="col-12 col-lg-3 order-lg-1 order-1 mb-2 mb-lg-0 text-center text-lg-start enav">
               <h3>Reports</h3>
            </div>
            <div class="col-12 col-lg-6 order-lg-2 order-2 mb-2 mb-lg-0 text-center">
               <t:form t:id="dateForm" class="date-form w-100">
                  <div class="input-group">
                     <span class="input-group-text" title="Planned end date">
                     <i class="fa fa-calendar"></i>
                     </span>            
                     <input t:id="dateRange" type="text" class="form-control" placeholder="Showing all dates" readonly="readonly"/>
                     <input type="submit" class="btn btn-primary" value="Generate Report"/>
                     <button type="button" class="btn btn-secondary" onclick="resetDateRange()">Show All</button>
                  </div>
               </t:form>
            </div>
            <div class="col-12 col-lg-3 order-lg-3 order-3 mb-2 mb-lg-0 text-center text-lg-end">
               <!-- third column in nav, leaving empty-->
            </div>
         </div>
      </div>
      <t:if test="noTasks">
         <div class="container d-flex justify-content-center align-items-center noTasks">
            <div class="row">
               <div class="col text-center">
                  <h2>No tasks to display.</h2>
               </div>
            </div>
         </div>
      </t:if>
<t:unless test="noTasks">
   <div class="container text-center" style="margin-top: 2rem;">
      <t:unless test="noReports">
         <t:loop source="reports" value="report">
            <div class="d-inline-block" style="padding: 1rem;">
               <div class="card" style="width: 18rem; border-width: 1rem; background-color: #7C74F6;">
                  <div class="card-body" style="background-color: #ffffff; text-align: center;">
                     <h5 class="card-title">Report: ${index}</h5>
                     <h6 class="card-subtitle mb-2 text-muted">Generated: ${formattedDate}</h6>
                     <t:pagelink class="btn btn-primary" page="reports/ViewReport" context="report">View Report</t:pagelink>
                  </div>
               </div>
            </div>
         </t:loop>
      </t:unless>
   </div>
</t:unless>
   <div class="container">
      <p>Looking for the original <a href="/oldreports">Reports</a>?</p>
   </div>
      <script src="/js/dateRange.js"></script>
   </t:security.authenticated>
   <t:security.notauthenticated>
      <div class="container d-flex justify-content-center align-items-center loginMessage">
         <div class="row">
            <div class="col text-center">
               <h2>You need to log in to view this.</h2>
            </div>
         </div>
      </div>
   </t:security.notauthenticated>
</html>
